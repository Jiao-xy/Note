# 存储管理

# 5.1存储管理的功能

增长迅速的存储需求

程序规模的增长速度远远大于存储器容量的增长速度

## 理想中的存储器

容量更大、速度更快、价格更便宜的非易失性存储器

## 实际中的存储器

- 1 纳秒    寄存器、

- 2纳秒     高速缓存、

- 10纳秒   内存、

- 10毫秒   磁盘、

- 100秒     磁带

## 进行存储抽象的原因

编译链接环节如何安排进程地址？

1、按照物理存储器的位置赋予实际物理地址

- 编译器必须知道当前内存的空闲部分及其地址
- 编译器为进程分配连续的地址

2、编译链接程序吧源程序编译链接后接到一个0地址为起始地址的线性或多维虚拟地址空间

- 每一个进程都拥有这样一个空间
- 每一个指令或者数据单元都在这个虚拟空间具有。。。。。。。

## 5.1.1虚拟存储器

存储器由内存和外存组成。本章节

操作系统对存储的抽象：地址空间

由于每个进程都有自己的虚拟内存，且每个虚存的大小不受实际物理存储器的限制，因此，系统不可能提供足够大的内存来存放所有进程的内容。内存中只能存放那些经常被访问的程序。

## 虚拟内存的基本特征

**不连续性**

- 物理内存分配非连续
- 虚拟地址空间的的使用非连续

大用户空间

- 提供给用户的虚拟内存可能大于实际内存

。。。。。。。。。。。。。。。。。。。

## 虚拟存储的支持技术

### 硬件

页式或段式存储中的地址转换机制(MMU,TLB)

### 操作系统

管理内存和外存间页面或段的换入和换出

## 5.1.2地址变换

内存地址的集合称为内存空间或物理地址空间。

虚存的线性空间------->内存的一维物理线性空间

### 地址重定位或地址映射

静态地址重定位

- 不需要硬件支持
- 无法实现虚拟存储器
- 占用连续的内存空间。。。。。。。。

动态地址重定位

- 可以对内存进行非连续分配（不同的BR寄存器即可）
- 可以实现虚拟存储器
- 利于程序段共享

## 5.1.3内外存数据传输的控制

### 用户自己控制

覆盖

### 操作系统控制

交换----进程级别

请求调入和预调入-----虚拟存储

。。。。。。。。。。。。。。。。

## 5.1.4内存分配和回收

内存的分配和回收是内存管理的主要功能之一，需要考虑以下几种策略和数据结构

分配结构：

放置策略：

交换策略：

调入策略：

回收策略：

## 5.1.5内存信息的共享与保护

硬件法、软件法和软硬件结合三种：

上下界保护法

保护键法

界限寄存器

。。。。。。。。。。。。。。。。。。。。。。。

# 5.2分区存储管理

分区管理的基本原理是给每一个内存中的进程划分一块适当大小的存储区，以连续存储各程序和数据，使各进程得以并发执行。分为固定分区和动态分区两种方法：

固定分区法：

动态分区法：

## 5.2.2分区的分配与回收

### 固定分区时的分配与回收

。。。。。。。

## 动态分区时的分配与回收

最先适应法

最佳适应法

最坏适应法

### 动态分区的回收与拼接

。。。。。。。。。。。。。。。。。

## 5.2.3分区存储管理的优缺点

#### 优点

- 实现了
- 硬件少

#### 缺点

- 内存
- 是
-  的。。。。。。。。。。。。。。。。。



# 5.3覆盖与交换技术

## 5.3.1覆盖技术



# 5.4页式管理





# 5.5段式与段页式管理



